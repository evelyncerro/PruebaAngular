<!-- Encabezado -->
<div class="mb-4 flex items-center justify-between">
  <div>
    <h1 class="text-2xl font-semibold text-slate-800">
      Crud
    </h1>
    <p class="text-sm text-slate-500">
      Prueba tecnica de crud de usuarios
    </p>
  </div>

  <button type="button" (click)="abrirNuevo()" class="h-10 px-5 rounded-full bg-sky-600 text-white text-sm font-medium
            shadow-md hover:bg-sky-700 hover:shadow-lg transition-all">
    Crear
  </button>

</div>

<div class="flex-1 overflow-auto">
  <div class="bg-white rounded-2xl shadow border border-slate-100">
    <table class="min-w-full text-sm">
      <thead class="bg-slate-50">
        <tr class="text-left text-xs font-semibold text-slate-500 uppercase">
          <th class="px-4 py-3">ID</th>
          <th class="px-4 py-3 w-16">UserId</th>
          <th class="px-4 py-3">Title</th>
          <th class="px-4 py-3">Body</th>
          <th class="px-4 py-3 w-32 text-center">Acciones</th>
        </tr>
      </thead>

      <tbody>
        @if (usuarios$ | async; as usuarios) {
          @for (usuario of usuarios | slice:inicio:(inicio + limite); track usuario.id)   {
          <tr class="border-t border-slate-100 hover:bg-slate-50/70">
            <td class="px-4 py-2 text-slate-800">
              {{ usuario.id }}
            </td>
            <td class="px-4 py-2 text-slate-600">
              {{ usuario.userId }}
            </td>
            <td class="px-4 py-2 text-slate-700">
              {{ usuario.title }}
            </td>
            <td class="px-4 py-2">
              <span class="inline-flex px-2.5 py-1 rounded-full text-xs font-medium
                           bg-sky-50 text-sky-700 border border-sky-100 capitalize">
                {{ usuario.body }}
              </span>
            </td>
            <td class="px-4 py-2 text-center">
              <div class="flex items-center justify-between">
                <button type="button" class="h-10 px-5 rounded-full bg-sky-600 text-white text-sm font-medium
                                shadow-md hover:bg-sky-700 hover:shadow-lg transition-all" (click)="editar(usuario)">
                  Editar
                </button>
                <button type="button" class="h-10 px-5 rounded-full bg-red-500 text-white text-sm font-medium
                                shadow-md hover:bg-red-700 hover:shadow-lg transition-all" (click)="confirmarEliminar(usuario)">
                  Eliminar
                </button>
              </div>
            </td>
          </tr>
          }

          @if (usuarios.length === 0) {
          <tr>
            <td colspan="5" class="px-4 py-6 text-center text-slate-400 text-sm">
              No hay usuarios registrados.
            </td>
          </tr>
          }
        }
      </tbody>
    </table>

    <div class="flex items-center justify-between px-4 py-3 border-t border-slate-100">
  @if (usuarios$ | async; as usuarios) {
    <span class="text-xs text-slate-500">
      Mostrando {{ usuarios.length ? (inicio + 1) : 0 }} â€“
      {{ Math.min(inicio + limite, usuarios.length) }}
      de {{ usuarios.length }}
    </span>

    <div class="flex gap-2">
      <button
        class="px-3 py-1 text-xs rounded border border-slate-300 text-slate-600 hover:bg-slate-100 disabled:opacity-40"
        [disabled]="inicio === 0"
        (click)="inicio = Math.max(0, inicio - limite)">
        Anterior
      </button>

      <button
        class="px-3 py-1 text-xs rounded border border-slate-300 text-slate-600 hover:bg-slate-100 disabled:opacity-40"
        [disabled]="inicio + limite >= usuarios.length"
        (click)="inicio = Math.min(inicio + limite, Math.max(0, usuarios.length - limite))">
        Siguiente
      </button>
    </div>
  }
</div>


    <app-usuario-form-modal
        [visible]="modalVisible"
        [titulo]="usuarioEditando ? 'Editar usuario' : 'Nuevo usuario'"
        [usuario]="usuarioEditando"
        (save)="onGuardarDesdeModal($event)"
        (cancel)="cerrarModal()"
      ></app-usuario-form-modal>


  </div>
</div>
